# 交通流计算
根据实时接受的数据，实时计算宏观中观交通流。

## 交通流量的计算
如何选择采样时间的长度?<br>
 根据此来计算1h的交通流量?<br>
参数记为: 计算持续时间q cal duration(=5min?)<br>

## 交通密度的计算需要车道长度
calibration过程得到
## 交通流参数的更新计算
频率都每接受1帧msg，就更新一次流密速?<br>
还是持续性接受，每隔一定时间更新计算一次?<br>
参数记为: 计算时间间隔cal interval= 30s? <br>

# 计算细节
密度k的计算，k需要对指定范围的车辆进行计数，并知道路段长度即可。<br>
路段速度v，需要车辆的微观数据vy(同时也要保留vx)，要根据每辆车的速度进行计算，路段平均速度取算数平均值。<br>
路段流量q，不能直接统计车辆数量即在行车辆数作为q，而要根据q=k*v计算。

# 交通流参数
## 1. 车道级交通流量
q_i, i为车道号

### 计算方法
按帧排序，统计各车道的在行车辆数。以堆栈弹出形式存储

## 2. 路段级交通流量
Q = sum(q_i)

### 计算方法
各车道的在行车辆数，每帧对所有车道做求和，再对帧做求和。

### 使用
抛洒物检测，增长率附加影响因子

## 3. 车道级密度
k_i, i为车道号

### 使用
非事故导致的距离过小判定
拥堵检测

## 4. 车道级速度
v_i, i为车道号

### 使用
拥堵检测
## 5. 用不上的
路段级的速度和密度

<p>
<img
src="./trafficDataFormat.png"
alt="交通数据格式"
title="交通数据格式"
width="100%"
>
</p>




